<form method="POST"
      action="{{ url_for('site.uploads_api') }}"
      class="form-horizontal upload-form"
      enctype="multipart/form-data">

  <div class="form-group">
    <div class="col-md-10">
      <label for="fileselect">File to upload</label>
      <input type="file" name="file" id="fileselect">
      <p class="help-block">Select a file to upload. Executables, libraries and images will not be allowed.</p>
    </div>
  </div>

  <div class="form-group">
    <div class="col-md-10">
      <label for="filename">Name</label>
      <input type="text" name="filename" id="filename" data-default="true">
      <p class="help-block">Name to be used for the uploaded file.</p>
    </div>
  </div>

  <button type="submit" class="btn btn-default">Upload</button>
</form>

<script type="text/javascript">
  $('#fileselect').on('change', function(event) {
  var $fileSelect = $(this),
      $fileName = $('#filename');

    if ($fileName.data('default')) {
      $fileName.val($fileSelect[0].files[0].name);
    }
  });

  $('#filename').on('change', function(event) {
    $(this).data('default', false);
  });
</script>
